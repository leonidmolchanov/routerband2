<!DOCTYPE HTML>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0 minimal-ui" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="apple-mobile-web-app-status-bar-style" content="black">

<title>Routerband</title>
    
<link rel="stylesheet" type="text/css" href="styles/style.css">
<link rel="stylesheet" type="text/css" class="switch_style" href="styles/skin.css">
<link rel="stylesheet" type="text/css" href="styles/framework.css">
<link rel="stylesheet" type="text/css" href="styles/ionicons.min.css">
    <link href="styles/sweetalert.css" rel="stylesheet"/> 
    
<script type="text/javascript" src="scripts/jquery.js"></script>
<script type="text/javascript" src="scripts/plugins.js"></script>
<script type="text/javascript" src="scripts/custom.js"></script>
 <script type="text/javascript" charset="utf-8" src="cordova.js"></script>

     <script src="scripts/sweetalert.js"></script>
   
</head>

<body>
    <div id="loading" class="loading_center"></div>
<div id="page-transitions">
    
<div class="page-preloader page-preloader-dark">
    <div class="spinner"></div>
</div>
    
<div id="header">
    <a href="#" class="open-left-sidebar"><i class="ion-navicon"></i></a>
   
        <p align="center">
            <font color="#ffffff"><i class="ion-social-usd"></i>&nbsp<span id="status_connect"></span></font></p>
    <a href="#" class="open-right-sidebar"><i class="ion-ios-more"></i></a>
</div>

    
<div id="sidebar-tap-close"></div>

<div id="sidebar-left">
    <div class="sidebar-scroll">
        <a href="javascript:windows('action')" class="sidebar-logo sidebar-item"></a><a href="#" class="sidebar-item sidebar-close"><i class="ion-ios-close-empty"></i></a>
        <a href="#" class="sidebar-item sidebar-close"><i class="ion-ios-close-empty"></i></a>
        <div class="sidebar-item sidebar-divider"></div>
        <div class="sidebar-menu">            
            <a class="sidebar-item" data-sub="sub-1" href="#"><i class="ion-ios-home-outline"></i>Профиль</a>
            <div id="sub-1" class="submenu">
                <a class="sidebar-item"  href="javascript:windows('profile-information')">Информация</a>
                <a class="sidebar-item" href="javascript:windows('profile-change')">Изменения</a>
                <a class="sidebar-item" href="javascript:windows('profile-sittings')">Настройки</a>
                <a class="sidebar-item" href="javascript:windows('profile-payment')">Оплата</a>
            </div>

            <a class="sidebar-item" data-sub="sub-2" href="#"><i class="ion-ios-gear-outline"></i>Роутер</a>
            <div id="sub-2" class="submenu">
                <a class="sidebar-item" href="javascript:windows('router-information')">Информация</a>
                <a class="sidebar-item" href="javascript:windows('router-select')">Выбор</a>
                <a class="sidebar-item" href="javascript:windows('router-secret')">Доступ</a>
                <a class="sidebar-item" href="javascript:windows('router-add')">Добавление</a>
                <a class="sidebar-item" href="javascript:windows('router-name')">Имена</a>
                <a class="sidebar-item" href="javascript:windows('router-del')">Удаление</a>
            </div>                       
            
            <a class="sidebar-item" data-sub="sub-3" href="#"><i class="ion-ios-gear-outline"></i>Wi-Fi</a>
            <div id="sub-3" class="submenu">
                <a class="sidebar-item" href="javascript:windows('wifi-information')">Информация</a>
                <a class="sidebar-item" href="javascript:windows('wifi-clients')">Подключения</a>
               <!-- <a class="sidebar-item" href="javascript:windows('wifi-scaner-ssid')">Сканер сетей</a>
                <a class="sidebar-item" href="javascript:windows('wifi-scaner-fre')">Сканер частот</a> -->
                    <a class="sidebar-item" href="javascript:windows('wifi-change-ssid')">Сменить имя wi-fi</a>
                <a class="sidebar-item" href="javascript:windows('wifi-change-psw')">Сменить пароль wi-fi</a>
            </div>
            
            
            <a class="sidebar-item" data-sub="sub-4" href="#"><i class="ion-ios-analytics-outline"></i>Диагностика</a>
            <div id="sub-4" class="submenu">
                <a class="sidebar-item" href="javascript:windows('diagnostic-all')">Общая</a>
                <a class="sidebar-item" href="javascript:windows('diagnostic-ping')">Ping</a>
                <a class="sidebar-item" href="javascript:windows('diagnostic-trace')">Трассировка</a>
                <a class="sidebar-item" href="javascript:windows('diagnostic-speedtest')">Speed test</a>
            </div>
            
            <a class="sidebar-item" data-sub="sub-5" href="#"><i class="ion-ios-copy-outline"></i>Безопасность</a>
            <div id="sub-5" class="submenu">
                <a class="sidebar-item" href="javascript:windows('security-service')">Сервисы</a>
                <a class="sidebar-item" href="javascript:windows('security-rules')">Список правил</a>
                <a class="sidebar-item" href="javascript:windows('security-block')">Блокировка</a>
             </div>
            
            <a class="sidebar-item" data-sub="sub-6" href="#"><i class="ion-ios-gear-outline"></i>Настройки</a>
            <div id="sub-6" class="submenu">
                <a class="sidebar-item" href="javascript:windows('sitting-reboot')">Перезагрузка</a>
                  <a class="sidebar-item" href="javascript:windows('sitting-modules')">Модули</a>
                <a class="sidebar-item" href="javascript:windows('sitting-shaper')">Умный трафик</a>
            </div>    
            <a class="sidebar-item" href="javascript:windows('news')"><i class="ion-ios-compose-outline"></i>Новости<i class="ion-record"></i></a>
            <a class="sidebar-item" href="javascript:windows('instructions')"><i class="ion-ios-compose-outline"></i>Инструкции<i class="ion-record"></i></a><a class="sidebar-item" href="javascript:windows('video')"><i class="ion-ios-videocam-outline"></i>Видео<i class="ion-record"></i></a>
            <a class="sidebar-item" href="javascript:windows('callback')"><i class="ion-ios-email-outline"></i>Обратная связь<i class="ion-record"></i></a>
        </div>
        <div class="sidebar-item sidebar-divider"></div>
        <div class="sidebar-item sidebar-copyright">
            <em>Copyright <span class="copyright-year"></span>. Все права защищены.</em>
        </div>
        <div class="sidebar-item sidebar-divider"></div>
    </div>
</div>
    
<div id="sidebar-right">
    <div class="sidebar-scroll">
        <div class="sidebar-small-menu">
            <a href="https://vk.com/club137316622" class="sidebar-item"><i class="ion-social-facebook-outline"></i><em>Vkontakte</em></a>
            <a href="#" class="sidebar-item"><i class="ion-social-youtube-outline"></i><em>YouTube</em></a>
             <a href="#" onClick="logout()" class="sidebar-item"><i></i><em>Выход</em></a>
            </div>
    </div>
</div> 

<div id="page-content" class="header-clear">

    <div class="heading-strip bg-2">
        <h3>Локальное подключение</h3>
        <p>Сервисное меню</p>
        <div class="overlay dark-overlay"></div>
    </div>

    <div class="activity-item one-half-responsive"><i class="ion-record color-green-dark"></i><strong>Routerband</strong><em><font color="#6e6e6e"><span id="plugPTP"></span></font></em></div>
    <div class="activity-item one-half-responsive"><i class="ion-record color-green-dark"></i><strong>Маска</strong><em><font color="#6e6e6e">sasa</font></em></div>
    <div class="activity-item one-half-responsive"><i class="ion-record color-green-dark"></i><strong>Шлюз</strong><em><font color="#6e6e6e">sasa</font></em></div>
    <div class="activity-item one-half-responsive"><i class="ion-record color-green-dark"></i><strong>DNS</strong><em><font color="#6e6e6e">sasa</font></em></div>
     <a href="#" onClick="connect()" class="sidebar-item"><i></i><em>Проверка</em></a>
            

        </div>
    </div>        
    
       <script type="text/javascript">
   document.addEventListener("deviceready", onDeviceReady, false);

   function onDeviceReady() {
     console.log("device ready");
               cordova.plugins.Mikrotik.connect("192.168.88.1", "8728", function(success){window.SuccessResponce=success}, function(error){window.SuccessResponce=error})
   }
           
           
           
           function msg(text_msg){
          
swal({
  title: '',
  text: text_msg,
  
})
            
        }
           
           
      var interval = setInterval(     
           function connect(){
if(window.SuccessResponce=="Connected")
    {
  clearInterval(interval);  
        
        
        var authInterval = setInterval(  
         function auth(){
         
             cordova.plugins.Mikrotik.login("support", "support", function(success){window.SuccessResponce=success},function(error){window.SuccessResponce=error})
            
             if(window.SuccessResponce=="Login successful")
             {
                 //msg("Авторизация прошла успешно!")
                 clearInterval(authInterval);
             
             FrameInterval = setInterval(  
         function Frame(){
             
              cordova.plugins.Mikrotik.command("/interface/pptp-client/print\n?name=routerband", function(success){window.SuccessResponcePtp=success},function(error){window.SuccessResponcePtp=error})
             alert(window.SuccessResponcePtp)
             
               }, 500);  
             
             
             }
             else if(window.SuccessResponce=="Login failed")
                 {
                     msg("Не верный логин или пароль")
                     clearInterval(authInterval);
                 }
             else if(window.SuccessResponce=="Connected")
                 {
                     
                    
                 }
             else
                 {
                  msg("Неизвестная ошибка")   
                 }
             
         }, 500);    
         
           }
else 
    {
        msg("Неизвестная ошибка")
        alert (window.SuccessResponce)
    }
 }, 3000);    
  
   
           connect();
    
    </script> 
</body>